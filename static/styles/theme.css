/* Theme and Dark Mode Styles */

:root {
    --toast-bg: white;
    --toast-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
    --primary-bg: #ffffff;
    --secondary-bg: #f8f9fa;
    --border-color: #dee2e6;
    --text-color: #212529;
    --muted-color: #6c757d;
}

[data-bs-theme="dark"] {
    --toast-bg: #2b2b2b;
    --toast-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.3);
    --primary-bg: #2b2b2b;
    --secondary-bg: #333333;
    --border-color: #404040;
    --text-color: #e0e0e0;
    --muted-color: #a0a0a0;
}

/* Toast styling */
.toast-container {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    z-index: 1050;
    pointer-events: none;
}

.toast {
    background: var(--toast-bg);
    border-radius: 4px;
    padding: 1rem 1.5rem;
    margin-bottom: 0.5rem;
    box-shadow: var(--toast-shadow);
    animation: slideIn 0.3s ease-out;
    pointer-events: auto;
    display: flex;
    align-items: center;
    min-width: 250px;
}

.toast.success {
    border-left: 4px solid #10b981;
    color: #065f46;
    background-color: #ecfdf5;
}

.toast.error {
    border-left: 4px solid #ef4444;
    color: #991b1b;
    background-color: #fef2f2;
}

.toast i {
    font-size: 1.25rem;
    margin-right: 0.75rem;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Category badges */
.badge.category-super { background-color: #2563eb !important; color: white !important; }
.badge.category-xofa { background-color: #7c3aed !important; color: white !important; }
.badge.category-food_drink { background-color: #059669 !important; color: white !important; }
.badge.category-save_inv { background-color: #10b981 !important; color: white !important; }
.badge.category-recurrent { background-color: #f59e0b !important; color: white !important; }
.badge.category-clothing { background-color: #ec4899 !important; color: white !important; }
.badge.category-personal { background-color: #8b5cf6 !important; color: white !important; }
.badge.category-taxes { background-color: #dc2626 !important; color: white !important; }
.badge.category-transport { background-color: #6366f1 !important; color: white !important; }
.badge.category-health { background-color: #06b6d4 !important; color: white !important; }
.badge.category-other { background-color: #6b7280 !important; color: white !important; }
.badge.category-car { background-color: #374151 !important; color: white !important; }
.badge.category-cobeetrans { background-color: #8b5cf6 !important; color: white !important; }
.badge.category-cobeefood { background-color: #f97316 !important; color: white !important; }

/* Chart specific */
#chartCenterTotal {
    pointer-events: none;
    z-index: 1;
}

[data-bs-theme="dark"] #chartCenterTotal {
    color: var(--text-color);
}

[data-bs-theme="dark"] #chartCenterTotal .text-muted {
    color: var(--muted-color) !important;
}

[data-bs-theme="dark"] #chartCenterTotal .fw-bold {
    color: #ffffff;
}

/* Dark mode component styles */
[data-bs-theme="dark"] .card {
    background-color: var(--primary-bg);
    border-color: var(--border-color);
}

[data-bs-theme="dark"] .card-header {
    background-color: var(--secondary-bg);
    border-color: var(--border-color);
}

[data-bs-theme="dark"] .card-body {
    color: var(--text-color);
}

[data-bs-theme="dark"] .btn-link {
    color: var(--text-color);
}

[data-bs-theme="dark"] .btn-link:hover {
    color: #ffffff;
}

[data-bs-theme="dark"] .text-muted {
    color: var(--muted-color) !important;
}

/* Form controls dark mode */
[data-bs-theme="dark"] .form-control {
    background-color: var(--secondary-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

[data-bs-theme="dark"] .form-control:focus {
    background-color: var(--secondary-bg);
    border-color: #0d6efd;
    color: var(--text-color);
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

[data-bs-theme="dark"] .form-select {
    background-color: var(--secondary-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

[data-bs-theme="dark"] .form-select:focus {
    background-color: var(--secondary-bg);
    border-color: #0d6efd;
    color: var(--text-color);
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

[data-bs-theme="dark"] .input-group-text {
    background-color: var(--secondary-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

/* Toast dark mode */
[data-bs-theme="dark"] .toast.success {
    color: #34d399;
    background-color: #064e3b;
}

[data-bs-theme="dark"] .toast.error {
    color: #f87171;
    background-color: #7f1d1d;
}

/* List and table dark mode */
[data-bs-theme="dark"] .list-group-item {
    background-color: var(--primary-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

[data-bs-theme="dark"] .list-group-item:hover:not(.editing) {
    background-color: var(--secondary-bg);
}

[data-bs-theme="dark"] .table {
    color: var(--text-color);
}

[data-bs-theme="dark"] .table thead th {
    background-color: var(--secondary-bg) !important;
    color: #ffffff !important;
    border-color: var(--border-color) !important;
}

[data-bs-theme="dark"] .table tbody td {
    border-color: var(--border-color) !important;
}

[data-bs-theme="dark"] .table-hover tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.075);
}

/* Typography dark mode */
[data-bs-theme="dark"] h1,
[data-bs-theme="dark"] h2,
[data-bs-theme="dark"] h3,
[data-bs-theme="dark"] h4,
[data-bs-theme="dark"] h5,
[data-bs-theme="dark"] h6 {
    color: #ffffff;
}

[data-bs-theme="dark"] .fw-bold {
    color: #ffffff;
}

[data-bs-theme="dark"] .legend-item {
    color: var(--text-color);
}

[data-bs-theme="dark"] .amount {
    color: #ffffff;
}

/* Modal dark mode */
[data-bs-theme="dark"] .modal-content {
    background-color: var(--primary-bg);
    border-color: var(--border-color);
}

[data-bs-theme="dark"] .modal-header {
    border-color: var(--border-color);
}

[data-bs-theme="dark"] .modal-footer {
    border-color: var(--border-color);
}

[data-bs-theme="dark"] .modal-title {
    color: #ffffff;
}

[data-bs-theme="dark"] .modal-body {
    color: var(--text-color);
}

/* Button variants dark mode */
[data-bs-theme="dark"] .btn-outline-danger {
    color: #dc3545;
    border-color: #dc3545;
}

[data-bs-theme="dark"] .btn-outline-danger:hover {
    background-color: #dc3545;
    border-color: #dc3545;
    color: #fff;
}

/* Edit form dark mode styles */
[data-bs-theme="dark"] .expense-item.editing {
    background-color: var(--primary-bg) !important;
    border-color: #0d6efd !important;
}

[data-bs-theme="dark"] .edit-form {
    color: var(--text-color);
}

[data-bs-theme="dark"] .edit-form .form-label {
    color: #ffffff !important;
}

[data-bs-theme="dark"] .edit-form .form-control,
[data-bs-theme="dark"] .edit-form .form-control-sm {
    background-color: var(--secondary-bg) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
}

[data-bs-theme="dark"] .edit-form .form-control:focus,
[data-bs-theme="dark"] .edit-form .form-control-sm:focus {
    background-color: var(--secondary-bg) !important;
    border-color: #0d6efd !important;
    color: var(--text-color) !important;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25) !important;
}

[data-bs-theme="dark"] .edit-form .form-select,
[data-bs-theme="dark"] .edit-form .form-select-sm {
    background-color: var(--secondary-bg) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23e0e0e0' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important;
}

[data-bs-theme="dark"] .edit-form .form-select:focus,
[data-bs-theme="dark"] .edit-form .form-select-sm:focus {
    background-color: var(--secondary-bg) !important;
    border-color: #0d6efd !important;
    color: var(--text-color) !important;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25) !important;
}

[data-bs-theme="dark"] .edit-form .input-group-text {
    background-color: var(--secondary-bg) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
}

[data-bs-theme="dark"] .table-light,
[data-bs-theme="dark"] tfoot.table-light,
[data-bs-theme="dark"] .table tfoot.table-light tr {
    background-color: var(--secondary-bg) !important;
    color: var(--text-color) !important;
}

[data-bs-theme="dark"] .table tfoot.table-light td,
[data-bs-theme="dark"] .table tfoot.table-light th {
    color: var(--text-color) !important;
}

[data-bs-theme="dark"] .table tfoot.table-light tr,
[data-bs-theme="dark"] .table tfoot.table-light td,
[data-bs-theme="dark"] .table tfoot.table-light th,
[data-bs-theme="dark"] tfoot.table-light tr,
[data-bs-theme="dark"] tfoot.table-light td,
[data-bs-theme="dark"] tfoot.table-light th {
    background-color: var(--secondary-bg) !important;
    color: var(--text-color) !important;
    border-color: var(--border-color) !important;
}

/* Mobile optimizations for iPhone */
@media (max-width: 768px) {
    /* Improve touch targets */
    .btn {
        min-height: 44px;
        padding: 0.5rem 1rem;
    }

    .btn-sm {
        min-height: 38px;
        padding: 0.25rem 0.75rem;
    }

    /* Optimize form controls for touch */
    .form-control, .form-select {
        min-height: 44px;
        font-size: 16px; /* Prevents zoom on iOS */
    }

    .form-control-sm, .form-select-sm {
        min-height: 38px;
        font-size: 14px;
    }

    /* Better spacing for mobile */
    .card {
        margin-bottom: 1rem;
    }

    .card-body {
        padding: 1rem;
    }

    /* Optimize toast positioning */
    .toast-container {
        bottom: 1rem;
        right: 1rem;
        left: 1rem;
        width: auto;
    }

    .toast {
        width: 100%;
        min-width: unset;
    }

    /* Landing page mobile optimization */
    .landing-button {
        height: 120px;
        margin-bottom: 1rem;
    }

    .landing-button i {
        font-size: 2rem;
    }

    /* Chart responsive */
    canvas {
        max-height: 250px !important;
    }
}

/* Raspberry Pi performance optimizations */
@media (prefers-reduced-motion: reduce) {
    .toast {
        animation: none;
    }

    .landing-button {
        transition: none;
    }

    .landing-button:hover {
        transform: none;
    }
}

/* Force reduced motion for low-end devices */
@media (max-device-width: 1024px) and (orientation: portrait) {
    * {
        animation-duration: 0.1s !important;
        transition-duration: 0.1s !important;
    }

    .toast {
        animation-duration: 0.2s !important;
    }
}

/* Optimize chart performance for mobile/Pi */
@media (max-width: 768px) {
    canvas {
        image-rendering: optimizeSpeed;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: optimize-contrast;
    }
}

/* Dark mode badge contrast improvements */
[data-bs-theme="dark"] .badge.category-car {
    background-color: #6b7280 !important; /* Lighter gray for better contrast */
}

[data-bs-theme="dark"] .badge.category-other {
    background-color: #9ca3af !important; /* Lighter gray for better contrast */
}

/* DARK MODE DEVELOPMENT GUIDELINES AND COMPREHENSIVE PATTERNS */

/*
DARK MODE FIRST PRINCIPLES:
1. Always use Bootstrap 5.3+ semantic color classes (bg-body, bg-body-secondary, text-body, etc.)
2. Never use fixed colors like bg-light, bg-white, text-dark in components
3. Test every new feature in both light AND dark modes before committing
4. Use CSS custom properties for consistent theming
5. Ensure proper contrast ratios for accessibility
*/

/* Bootstrap utility class overrides for proper dark mode support */
[data-bs-theme="dark"] .bg-body {
    background-color: var(--bs-body-bg) !important;
}

[data-bs-theme="dark"] .bg-body-secondary {
    background-color: var(--bs-secondary-bg) !important;
}

[data-bs-theme="dark"] .bg-body-tertiary {
    background-color: var(--bs-tertiary-bg) !important;
}

[data-bs-theme="dark"] .text-body {
    color: var(--bs-body-color) !important;
}

[data-bs-theme="dark"] .text-body-secondary {
    color: var(--bs-secondary-color) !important;
}

[data-bs-theme="dark"] .text-body-tertiary {
    color: var(--bs-tertiary-color) !important;
}

/* Ensure bg-light fallback for dark mode - use bg-body-secondary instead */
[data-bs-theme="dark"] .bg-light {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color) !important;
}

/* Strong and bold text should be highly visible in dark mode */
[data-bs-theme="dark"] strong,
[data-bs-theme="dark"] .fw-bold {
    color: #ffffff !important;
}

/* Improve overall text readability */
[data-bs-theme="dark"] .card-body {
    color: var(--bs-body-color);
}

[data-bs-theme="dark"] .card-body strong {
    color: #ffffff;
}

/* Alert and status components */
[data-bs-theme="dark"] .alert {
    color: var(--bs-body-color);
    background-color: var(--bs-secondary-bg);
    border-color: var(--bs-border-color);
}

[data-bs-theme="dark"] .alert-success {
    color: #22c55e;
    background-color: rgba(34, 197, 94, 0.1);
    border-color: rgba(34, 197, 94, 0.2);
}

[data-bs-theme="dark"] .alert-danger {
    color: #ef4444;
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.2);
}

[data-bs-theme="dark"] .alert-warning {
    color: #f59e0b;
    background-color: rgba(245, 158, 11, 0.1);
    border-color: rgba(245, 158, 11, 0.2);
}

[data-bs-theme="dark"] .alert-info {
    color: #06b6d4;
    background-color: rgba(6, 182, 212, 0.1);
    border-color: rgba(6, 182, 212, 0.2);
}

/* Dropdown and offcanvas dark mode */
[data-bs-theme="dark"] .dropdown-menu {
    background-color: var(--bs-body-bg);
    border-color: var(--bs-border-color);
}

[data-bs-theme="dark"] .dropdown-item {
    color: var(--bs-body-color);
}

[data-bs-theme="dark"] .dropdown-item:hover,
[data-bs-theme="dark"] .dropdown-item:focus {
    background-color: var(--bs-secondary-bg);
    color: var(--bs-body-color);
}

[data-bs-theme="dark"] .offcanvas {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
}

/* Pagination dark mode */
[data-bs-theme="dark"] .pagination .page-link {
    background-color: var(--bs-body-bg);
    border-color: var(--bs-border-color);
    color: var(--bs-body-color);
}

[data-bs-theme="dark"] .pagination .page-link:hover {
    background-color: var(--bs-secondary-bg);
    border-color: var(--bs-border-color);
    color: var(--bs-body-color);
}

[data-bs-theme="dark"] .pagination .page-item.active .page-link {
    background-color: var(--bs-primary);
    border-color: var(--bs-primary);
    color: #ffffff;
}

/* Progress bars */
[data-bs-theme="dark"] .progress {
    background-color: var(--bs-secondary-bg);
}

/* Borders and dividers */
[data-bs-theme="dark"] .border {
    border-color: var(--bs-border-color) !important;
}

[data-bs-theme="dark"] .border-top {
    border-top-color: var(--bs-border-color) !important;
}

[data-bs-theme="dark"] .border-bottom {
    border-bottom-color: var(--bs-border-color) !important;
}

[data-bs-theme="dark"] .border-start {
    border-left-color: var(--bs-border-color) !important;
}

[data-bs-theme="dark"] .border-end {
    border-right-color: var(--bs-border-color) !important;
}

/* Navbar improvements */
[data-bs-theme="dark"] .navbar {
    background-color: var(--bs-body-bg) !important;
    border-bottom: 1px solid var(--bs-border-color);
}

[data-bs-theme="dark"] .navbar-brand {
    color: #ffffff !important;
}

[data-bs-theme="dark"] .navbar-nav .nav-link {
    color: var(--bs-body-color) !important;
}

[data-bs-theme="dark"] .navbar-nav .nav-link:hover {
    color: #ffffff !important;
}

/* Accordion dark mode */
[data-bs-theme="dark"] .accordion {
    --bs-accordion-bg: var(--bs-body-bg);
    --bs-accordion-border-color: var(--bs-border-color);
    --bs-accordion-button-bg: var(--bs-secondary-bg);
    --bs-accordion-button-color: var(--bs-body-color);
    --bs-accordion-button-active-bg: var(--bs-primary);
    --bs-accordion-button-active-color: #ffffff;
}

/* Tab navigation */
[data-bs-theme="dark"] .nav-tabs {
    border-bottom-color: var(--bs-border-color);
}

[data-bs-theme="dark"] .nav-tabs .nav-link {
    color: var(--bs-body-color);
    border-color: transparent;
}

[data-bs-theme="dark"] .nav-tabs .nav-link:hover {
    border-color: var(--bs-border-color);
    color: #ffffff;
}

[data-bs-theme="dark"] .nav-tabs .nav-link.active {
    color: #ffffff;
    background-color: var(--bs-body-bg);
    border-color: var(--bs-border-color) var(--bs-border-color) var(--bs-body-bg);
}

/* List groups */
[data-bs-theme="dark"] .list-group {
    --bs-list-group-bg: var(--bs-body-bg);
    --bs-list-group-border-color: var(--bs-border-color);
    --bs-list-group-item-bg: var(--bs-body-bg);
    --bs-list-group-hover-bg: var(--bs-secondary-bg);
}

/* Breadcrumb */
[data-bs-theme="dark"] .breadcrumb-item + .breadcrumb-item::before {
    color: var(--bs-secondary-color);
}
